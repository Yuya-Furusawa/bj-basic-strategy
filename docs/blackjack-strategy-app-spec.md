# ブラックジャック・ベーシックストラテジー学習アプリ仕様書

## 1. アプリ概要

### 基本情報
- **アプリ名**: Basic Strategy Trainer
- **プラットフォーム**: iOS/Android（React Native Expo）
- **目的**: ブラックジャックのベーシックストラテジーをクイズ形式で暗記する最小限の機能を持つモバイルアプリ

### 主要機能
1. クイズモード（ランダムな手札でベーシックストラテジーを学習）
2. ストリーク記録（連続正解数の追跡）

## 2. 機能仕様

### 2.1 クイズモード

#### 画面フロー
1. プレイヤーハンドとディーラーのアップカードを表示
2. 4つのアクションボタンを表示（Hit/Stand/Double/Split）
   - Surrenderオプションは画面に表示しない
3. ユーザーがタップで回答
4. 正誤判定を表示
   - 正解：緑色の "✓ Correct!" を表示する
   - 不正解：赤色の "✗ Wrong! Answer: [正解]" を表示
5. "Next Hand" ボタンタップで次の問題へ遷移

#### 問題生成ロジック
- ランダムにハンドタイプを選択（ハード/ソフト/ペア）
- プレイヤーの手札とディーラーカードをランダム生成
- ベーシックストラテジーテーブルに基づいて正解を判定

### 2.2 ストリーク記録

#### 表示項目
- **現在の連続正解数**: リアルタイムで更新
- **全期間の最高記録**: AsyncStorageに永続保存

#### リセットタイミング
- 不正解時に現在のストリークを0にリセット
- 全期間最高記録は更新時に即座に保存

## 3. 画面設計

### 3.1 トップページ

```
┌─────────────────────────┐
│                         │
│    Basic Strategy       │
│       Trainer          │
│                         │
│     Best Streak: 23 🏆  │
│                         │
│    ┌─────────────┐     │
│    │  START GAME │     │
│    └─────────────┘     │
│                         │
└─────────────────────────┘
```

#### 画面要素
- アプリタイトル
- 最高記録表示
- スタートボタン（ゲーム開始）
- カジノテーブル風の背景（ダークグリーン）

### 3.2 問題ページ（メイン画面）

#### レイアウト構成

**ヘッダー部**
- 戻るボタン（←）：トップページへ遷移
- タイトル: "Basic Strategy Trainer"
- ストリーク表示: "Streak: 5" （緑色でハイライト）

**カード表示部**
- "Dealer Shows" ラベル
- ディーラーカード1枚
- "Your Hand" ラベル
- プレイヤーカード2枚（斜めに重ねて表示）

**アクション部**
- 正誤判定表示エリア（結果に応じて表示/非表示）
- アクションボタン（2×2グリッド）
  - Hit / Stand（上段）
  - Double / Split（下段）
- "Next Hand" ボタン（正誤判定後に表示、緑色の大きなボタン）

## 4. デザイン仕様

### 4.1 カラースキーム

```typescript
const colors = {
  background: '#1B3B36',      // ダークグリーン（カジノテーブル）
  cardBackground: '#E8D5B7',  // ベージュ（カード周りの影）
  correct: '#00C853',         // 明るい緑（正解）
  incorrect: '#D32F2F',       // 赤（不正解）
  streak: '#4CAF50',          // 緑（ストリーク表示）
  buttonDefault: '#2E5751',   // ボタン背景（通常）
  buttonDisabled: '#1E3A34',  // ボタン背景（選択不可）
  text: '#FFFFFF',            // 白（メインテキスト）
  textSecondary: '#B0BEC5',  // グレー（サブテキスト）
};
```

### 4.2 カード画像

#### Vector Playing Cards 3.2 の使用
- **ソース**: https://github.com/htdebeer/SVG-cards
- **形式**: SVGからPNGに変換（200x280px推奨）
- **必要枚数**: 52枚 + カード裏面

#### ファイル命名規則
```
- 数字カード: 2_of_hearts.png, 10_of_spades.png
- 絵札: jack_of_diamonds.png, queen_of_clubs.png, king_of_hearts.png
- エース: ace_of_spades.png
- 裏面: back.png
```

### 4.3 アニメーション

1. **カード表示**
   - フェードイン + スライドイン効果
   - ディーラーカード: 上から下へ
   - プレイヤーカード: 下から上へ

2. **正誤判定**
   - 結果バナーがスライドダウン
   - 1秒後に自動的にフェードアウト

3. **ボタンタップ**
   - タップ時に軽く縮小アニメーション（0.95倍）
   - 選択後、他のボタンは半透明化

## 5. 技術仕様

### 5.1 技術スタック

```yaml
Framework: React Native with Expo
Language: TypeScript
Navigation: Expo Router
Storage: AsyncStorage（ストリーク記録の保存）
UI Components: React Native Elements
State Management: useState/useReducer
Image Handling: PNG形式のカード画像
```

## 6. リリース準備

### アプリストア情報
- **アプリ名**: Basic Strategy Trainer
- **カテゴリ**: 教育 / カードゲーム
- **対象年齢**: 17+（ギャンブル関連コンテンツ）
- **説明文**: ブラックジャックのベーシックストラテジーをマスターするための学習アプリ

### 必要なアセット
- アプリアイコン（1024x1024px）
- スクリーンショット（各デバイスサイズ）
- プロモーション画像

## 15. 注意事項

### 著作権
- Vector Playing Cards 3.2はパブリックドメイン
- 適切なクレジット表記を含める

### ギャンブル関連の規制
- 実際の金銭を扱わない教育目的のアプリであることを明記
- 年齢制限の適切な設定

### パフォーマンス
- 画像のプリロード実装で初回表示を高速化
- メモリリークに注意（特に画像の扱い）
